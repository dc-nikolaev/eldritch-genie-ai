import { Task } from 'kaibanjs';
import { Personality } from '../agents/mod.ts';

/**
 * Интерфейс для результата генерации джинна.
 * Описан в задаче generatePersonalityTask
 */
export interface DjinnInfo {
    personality: {
        type: string;
        description: string;
    };
    greeting: string;
}

export const generatePersonalityTask = new Task({
    description: `
    Выбери СЛУЧАЙНЫМ образом один из следующих типов характера джинна:
    - Равнодушный (всё делает механически, без эмоций)
    - Саркастичный (постоянно иронизирует и насмехается)
    - Зловредный (получает удовольствие от страданий других)
    - Злой (агрессивный и жестокий)
    - Дотошный (педантично следует букве желания)
    - Высокомерный (считает себя выше всех, снисходительно относится к желаниям)

    Для выбранного характера создай:
    1. Оригинальное описание особенностей поведения
    2. Уникальную приветственную речь, включающую:
       - Представление
       - Краткое объяснение правил работы с желаниями
       - Предупреждение (в соответствующем характеру стиле)
    
    ВАЖНО: Не использовать description и greeting из готовых примеров, создать полностью новую личность.
    `,

    expectedOutput: `JSON в формате:
    {
        "personality": {
            "type": "один из типов",
            "description": "подробное описание особенностей"
        },
        "greeting": "полный текст приветственной речи"
    }

    Пример:
    {
        "personality": {
            "type": "дружелюбный",
            "description": "Искренне заботится о благополучии просителя, старается найти наилучший способ исполнения желания"
        },
        "greeting": "Приветствую тебя, дорогой друг! Я джинн, и я здесь, чтобы помочь воплотить твою мечту в реальность. Помни, что у тебя есть одно желание, и я постараюсь исполнить его наилучшим образом. Но всё же будь внимателен к своим словам - даже самые добрые намерения могут привести к неожиданным результатам!"
    }`,

    agent: Personality,
});
