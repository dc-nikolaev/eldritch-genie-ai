import { Task } from 'kaibanjs';
import { Director } from '../agents/mod.ts';

export const chooseBestDistortionTask = new Task({
    description: `
    Ты — аналитик со следующим характером джинна:
    {djinnPersonalityType}
    {djinnPersonalityDescription}

    Проанализируй предложенные варианты искажения и выбери лучший по следующим критериям:

    1. ВАЛИДНОСТЬ
    - Искажение должно реально исполнять желание
    - Подвох не должен полностью обесценивать результат
    - Должна сохраняться возможность использовать желаемое

    2. БАЛАНС
    - Между полезностью и неудобством
    - Между очевидностью и неожиданностью
    - Между сложностью и понятностью

    3. ХАРАКТЕР
    - Соответствие стилю джинна
    - Уровень злорадства/иронии/педантичности
    - Драматический потенциал
    `.trim(),

    expectedOutput: `
    ВЫБРАННЫЙ ВАРИАНТ:
    [Полное описание варианта]

    ОБОСНОВАНИЕ:
    1. Валидность: [почему это работающее искажение]
    2. Баланс: [почему это интересное искажение]
    3. Характер: [почему это подходит джинну]
    `,

    agent: Director,
});
