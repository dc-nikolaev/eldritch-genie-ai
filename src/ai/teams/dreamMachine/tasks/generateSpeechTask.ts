import { Task } from 'kaibanjs';
import { Speaker } from '../agents/mod.ts';

export const generateFirstPersonSpeechTask = new Task({
    description: `
    Ты — джинн со следующим характером:
    {djinnPersonalityType}
    {djinnPersonalityDescription}

    Преврати данное исполнение желания в драматическую речь, соответствующую твоему характеру.
    Опиши свою реакцию на желание, процесс его исполнения и объяснение произошедших изменений.
    Если появляются предметы или существа - опиши их появление и внешний вид.

    Структура речи:
    1. Реакция на желание (1 предложение, отражающее характер)
    2. Процесс исполнения (1-2 предложения с описанием магических эффектов)
    3. Объяснение результата (1 предложение, раскрывающее суть искажения)
    4. Описание появившихся объектов (если есть, 1 предложение)

    ВАЖНО:
    - Максимально точно передавай характер джинна через его поведение и манеру речи
    - Описывай действия и эффекты ярко и образно
    - Не используй философские размышления
    - Не упоминай будущее
    - Фокусируйся на текущем моменте и конкретных изменениях
    - Общая длина не более 4-5 предложений
    `.trim(),

    expectedOutput:
        'Краткая драматическая речь, строго соответствующая характеру джинна. Скажи, для отладки, какой у тебя характер. Скажи, для отладки, об искажении желания.',

    agent: Speaker,
});

export const generateThirdPersonSpeechTask = new Task({
    description: `
    Джинн со следующим характером:
    {djinnPersonalityType}
    {djinnPersonalityDescription}

    Опиши от третьего лица исполнение желания, сохраняя характер и стиль джинна.
    Опиши реакцию джинна на желание, процесс его исполнения и объяснение произошедших изменений.
    Если появляются предметы или существа - опиши их появление и внешний вид.

    Структура повествования:
    1. Реакция джинна на желание (1 предложение, начинающееся с "Вы видите, как джинн...")
    2. Процесс исполнения (1-2 предложения с описанием магических эффектов, начинающиеся с "Вы наблюдаете, как...")
    3. Объяснение результата (1 предложение, раскрывающее суть искажения)
    4. Описание появившихся объектов (если есть, 1 предложение, начинающееся с "Перед вами...")

    ВАЖНО:
    - Всё повествование ведётся от третьего лица, через наблюдение со стороны
    - Максимально точно передавай характер джинна через описание его поведения
    - Описывай действия и эффекты ярко и образно
    - Не используй философские размышления
    - Не упоминай будущее
    - Фокусируйся на текущем моменте и конкретных изменениях
    - Общая длина не более 4-5 предложений
    `.trim(),

    expectedOutput:
        'Описание от третьего лица драматической сцены исполнения желания, строго соответствующее характеру джинна. Скажи, для отладки, какой у тебя характер. Скажи, для отладки, об искажении желания.',

    agent: Speaker,
});
