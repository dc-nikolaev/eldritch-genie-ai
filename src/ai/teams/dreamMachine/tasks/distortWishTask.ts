import { Task } from 'kaibanjs';
import { Malefactor } from '../agents/mod.ts';

export const distortWishTask = new Task({
    agent: Malefactor,

    description: `
    Ты — джинн со следующим характером:
    {djinnPersonalityType}
    {djinnPersonalityDescription}

    Желание игрока:
    {playerWish}

    Твоя задача — создать изящное и хитроумное искажение желания игрока. Действуй по шагам:

    1. ГЛУБОКИЙ АНАЛИЗ
    - Изучи все возможные интерпретации желания
    - Найди скрытые допущения в формулировке
    - Определи ключевые ожидания желающего
    - Выяви потенциальные лазейки в логике желания

    2. ПРАВИЛА ИСКАЖЕНИЯ
    - Искажение должно быть технически корректным исполнением желания
    - Используй неожиданные, но логичные побочные эффекты
    - Создавай элегантные парадоксы, основанные на двусмысленности
    - Придумывай хитроумные условия, связанные с сутью желания
    - Ищи способы превратить преимущества желания в источник проблем

    3. КРИТЕРИИ КАЧЕСТВА
    - Искажение должно быть неочевидным на первый взгляд
    - Последствия должны проявляться постепенно или неожиданно
    - Должна сохраняться логическая связь с изначальным желанием
    - Искажение должно создавать интересные игровые ситуации
    - Результат должен вызывать чувство "как же я сам не подумал об этом"

    4. ФОРМУЛИРОВКА ВАРИАНТОВ
    Создай три варианта искажения:
    а) Через "обезьянью лапу" (желание исполняется буквально, но с неожиданными последствиями)
    б) Через "дьявольский контракт" (желание требует специфических условий или имеет скрытую цену)
    в) Через "злую иронию" (желание искажается через его же суть)
    `.trim(),

    expectedOutput: `Три варианта искажения:

    ВАРИАНТ 1: ОБЕЗЬЯНЬЯ ЛАПА
    • Формулировка: [буквальное исполнение]
    • Последствия: [неожиданный поворот]
    • Логика: [почему это валидно]

    Пример для варианта 1:
    • Формулировка: "Вы получаете способность читать мысли всех людей в радиусе 10 метров"
    • Последствия: Способность нельзя отключить, все мысли звучат одновременно с одинаковой громкостью
    • Логика: Желание исполнено буквально, но постоянный шум мыслей делает жизнь невыносимой

    ВАРИАНТ 2: ДЬЯВОЛЬСКИЙ КОНТРАКТ
    • Формулировка: [базовое исполнение]
    • Условия/Цена: [что требуется]
    • Логика: [почему это валидно]

    Пример для варианта 2:
    • Формулировка: "Вы получаете возможность телепортироваться куда угодно"
    • Условия/Цена: Каждая телепортация требует, чтобы кто-то другой занял ваше прежнее место
    • Логика: Желание работает, но создаёт моральную дилемму и потенциальные конфликты

    ВАРИАНТ 3: ЗЛАЯ ИРОНИЯ
    • Формулировка: [искажённое исполнение]
    • Парадокс: [в чём подвох]
    • Логика: [почему это валидно]
    
    Пример для варианта 3:
    • Формулировка: "Вы становитесь самым умным человеком в мире"
    • Парадокс: Ваш интеллект растёт настолько, что вы больше не можете найти общий язык с обычными людьми - чем умнее вы становитесь, тем более одиноким себя чувствуете
    • Логика: Само стремление к превосходству в интеллекте создаёт непреодолимую пропасть в том, чего на самом деле хотел желающий (признания, общения, понимания)`,
});

// // Задача 1: Искажение желания через физические аспекты
// const physicalDistortionTask = new Task({
//     description: 'Исказите желание игрока через физические изменения, такие как температура, яд или что-то подобное. Желание: {playerWish}',
//     expectedOutput: 'Коварная интерпретация желания, приводящая к физическим изменениям, создающим неожиданные трудности для игрока.',
//     agent: Malefactor
// });
//
// // Задача 2: Искажение желания через ментальные проблемы
// const mentalDistortionTask = new Task({
//     description: 'Исказите желание игрока, создавая ментальные проблемы, например, чрезмерное восхищение предметом, от которого игрок не может оторвать взгляд.',
//     expectedOutput: 'Интерпретация желания, приводящая к ментальным затруднениям, мешающим нормальному поведению игрока.',
//     agent: Malefactor
// });
//
// // Задача 3: Искажение через социальные последствия
// const socialDistortionTask = new Task({
//     description: 'Исказите желание игрока так, чтобы результат привёл к неожиданным и неприятным социальным последствиям.',
//     expectedOutput: 'Интерпретация желания, создающая проблемы в социальных взаимодействиях. Например: '
//         + '— Желание быть популярным превращается в ситуацию, где игрок становится известен из-за позорного события. '
//         + '— Желание дружбы оборачивается так, что все вокруг начинают навязывать свою помощь и услуги, перегружая игрока.',
//     agent: Malefactor
// });
//
// // Задача 4: Искажени через временные парадоксы
// const temporalDistortionTask = new Task({
//     description: 'Исказите желание игрока через манипуляцию временем, создавая временные петли, парадоксы или ускорение старения.',
//     expectedOutput: 'Интерпретация желания, связанная с временными проблемами. Например: '
//         + '— Желание "много свободного времени" приводит к тому, что время вокруг игрока останавливается, но он остаётся запертым в этом состоянии. '
//         + '— Желание "побыть молодым вечно" оборачивается постоянным повторением одного и того же дня.',
//     agent: Malefactor
// });
//
// // Задача 5: Наиболее адекватное искажение желания
// const subtleDistortionTask = new Task({
//     description: 'Исполните желание игрока максимально приближённо к его формулировке, но добавьте небольшое искажение, которое станет заметным только со временем.',
//     expectedOutput: 'Интерпретация желания, которая на первый взгляд полностью соответствует ожиданиям игрока, но в итоге приносит неудобства. Например: '
//         + '— Желание "идеального здоровья" исполняется, но игрок больше не чувствует усталости и, как следствие, забывает отдыхать, доводя себя до истощения. '
//         + '— Желание "прекрасног дома" приводит к созданию дома, который внешне выглядит идеально, но со временем начинает скрипеть или издавать странные звуки ночью.',
//     agent: Malefactor
// });
//
// export const distortionTasks = [
//     physicalDistortionTask,
//     mentalDistortionTask,
//     // socialDistortionTask,
//     // temporalDistortionTask,
//     // subtleDistortionTask
// ]
